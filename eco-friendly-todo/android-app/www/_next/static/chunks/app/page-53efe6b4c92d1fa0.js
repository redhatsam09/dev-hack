(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4834:(e,t,l)=>{Promise.resolve().then(l.bind(l,7648))},7648:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>r});var s=l(5155),a=l(2115);function n(e){let{onPointsUpdate:t}=e,l=(0,a.useRef)(null),[n,r]=(0,a.useState)(!1),[i,d]=(0,a.useState)(null),[c,o]=(0,a.useState)(null),[x,m]=(0,a.useState)(!1),u=async()=>{o(null);let e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});l.current&&(l.current.srcObject=e);let s=new MediaRecorder(e);d(s),s.start(),r(!0);let a=[];s.ondataavailable=e=>{a.push(e.data)},s.onstop=async()=>{m(!0);let e=new Blob(a,{type:"video/mp4"}),l=new FileReader;l.readAsDataURL(e),l.onloadend=async()=>{let e=l.result.split(",")[1],s=await fetch("/api/analyze-video",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({video:e})}),a=await s.json();o(a.analysis),t(a.analysis.points),m(!1)}}};return(0,s.jsxs)("div",{className:"flex flex-col items-center w-full",children:[(0,s.jsx)("div",{className:"w-full max-w-md rounded-lg bg-black h-72 mb-4 overflow-hidden shadow-lg",children:(0,s.jsx)("video",{ref:l,autoPlay:!0,muted:!0,className:"w-full h-full object-cover"})}),(0,s.jsx)("button",{onClick:()=>{n?i&&(i.stop(),r(!1),l.current&&l.current.srcObject&&(l.current.srcObject.getTracks().forEach(e=>e.stop()),l.current.srcObject=null)):u()},className:"px-8 py-4 font-bold text-white bg-gradient-to-r from-blue-500 to-purple-600 rounded-full hover:from-blue-600 hover:to-purple-700 disabled:opacity-50 transition-all duration-300 ease-in-out transform hover:scale-105 shadow-lg",disabled:x,children:x?"Analyzing...":n?"Stop Recording & Analyze":"Start Recording"}),c&&(0,s.jsxs)("div",{className:"mt-6 p-6 bg-white rounded-xl shadow-lg text-left w-full max-w-md animate-fade-in",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:c.productName}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:c.description}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-gray-700",children:"Material"}),(0,s.jsx)("p",{className:"text-gray-600",children:c.material})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-gray-700",children:"Points"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-green-500",children:["+",c.points]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-bold text-gray-700 mb-2",children:"Recycling Methods"}),(0,s.jsxs)("div",{className:"bg-green-100 p-4 rounded-lg mb-2",children:[(0,s.jsx)("p",{className:"font-semibold text-green-800",children:"Best Way"}),(0,s.jsx)("p",{className:"text-green-700",children:c.bestRecyclingMethod})]}),(0,s.jsxs)("div",{className:"bg-blue-100 p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"font-semibold text-blue-800",children:"Easy Way"}),(0,s.jsx)("p",{className:"text-blue-700",children:c.easyRecyclingMethod})]})]})]})]})}function r(){let[e,t]=(0,a.useState)(0);return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-green-100 to-blue-200 py-8",children:(0,s.jsx)("main",{className:"flex flex-col items-center justify-center w-full flex-1 px-4 sm:px-20 text-center",children:(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl p-8 max-w-2xl w-full",children:[(0,s.jsx)("h1",{className:"text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-blue-500 mb-4",children:"Eco-Recycle Challenge"}),(0,s.jsx)("p",{className:"text-lg text-gray-600 mb-8",children:"Record a video of you recycling an item to earn points!"}),(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)(n,{onPointsUpdate:e=>{t(t=>t+e)}})}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-12 shadow-inner overflow-hidden",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 h-12 rounded-full flex items-center justify-center text-white font-bold text-xl transition-all duration-500 ease-out",style:{width:"".concat(Math.min(e/500*100,100),"%")},children:(0,s.jsxs)("span",{className:"drop-shadow-md",children:[e," Points"]})})}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Goal: 500 Points"})]})})})}}},e=>{e.O(0,[441,964,358],()=>e(e.s=4834)),_N_E=e.O()}]);